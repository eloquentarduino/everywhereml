{% if left[i] != right[i] %}
    if (x[{{ features[i] }}] <= {{ thresholds[i] }}) {
        {% with i = left[i] %}
            {% include './tree' %}
        {% endwith %}
    }
    else {
        {% with i = right[i] %}
            {% include './tree' %}
        {% endwith %}
    }
{% else %}
    *classIdx = {{ classes[i].argmax() }};
    *classScore = {{ classes.flatten()[classes[i].argmax()] }};
    return;
{% endif %}